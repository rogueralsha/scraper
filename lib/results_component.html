<link
        rel="stylesheet"
        type="text/css"
        href="https://fonts.googleapis.com/icon?family=Material+Icons">

<material-expansionpanel class="resultsExpander" *ngIf="loaded" [name]="artistDisplay" [secondaryText]="pathDisplay" [showSaveCancel]="false">
    <table style="width: 100%">
        <tr>
            <td>
                <material-button (click)="showPopup=!showPopup" popupSource #source="popupSource">
                    <material-icon icon="list" size="x-small"></material-icon>
                </material-button>
                <material-popup [(visible)]="showPopup" [source]="source" [zIndex]="99999">
                    <material-list size="medium">
                        <material-list-item *ngFor="let p of availablePathPrefixes"
                                            (trigger)="artistPath = p + '/' + results.artist">{{p}}</material-list-item>
                    </material-list>
                </material-popup>
            </td>
            <td style="width: 99%; white-space: nowrap;">
                <material-input [(ngModel)]="artistPath" label="Save Path"></material-input>
            </td>
            <td style="white-space: nowrap;">
                <material-checkbox [(ngModel)]="savePath" label="Save" no-ink></material-checkbox>
            </td>
        </tr>
    </table>

<div class="linkResults">

        <div  style="overflow: hidden; text-overflow: ellipsis;">
            <table class="resultsTable">
                <tr *ngFor="let r of links; let i = index"  style="max-height: 50px;">
                    <td style="width: 32pt;">
                        <div style="width: 32pt;">
                        <material-button  materialTooltip="Select only this item" [tooltipPositions]="tooltipPosition"  clear-size (trigger)="selectOnly(i)">
                            <material-icon icon="arrow_forward" size="x-small"></material-icon>
                        </material-button>
                        </div>
                    </td>
                    <td style="width: 32pt;">
                        <div style="width: 32pt;">
                        <material-button  materialTooltip="Select this item and the items above it" [tooltipPositions]="tooltipPosition"  clear-size (trigger)="selectAbove(i)">
                            <material-icon icon="arrow_upward" size="x-small"></material-icon>
                        </material-button>
                        </div>
                    </td>
                    <td style="width: 32pt;">
                        <div style="width: 32pt;">
                        <material-button  materialTooltip="Select this item and the items beneath it" [tooltipPositions]="tooltipPosition"  clear-size (trigger)="selectBeneath(i)">
                            <material-icon icon="arrow_downward" size="x-small"></material-icon>
                        </material-button>
                        </div>
                    </td>
                    <td style="width: 32pt;">
                        <div style="width: 32pt;">
                        <material-checkbox [(ngModel)]="r.select"></material-checkbox>
                        </div>
                    </td>
                    <td style="width:50px;">
                        <img [src]="r.thumbnail"/>
                    </td>
                    <td style="white-space: nowrap; ">
                        <a href="{{r.url}}" (click)="openTab($event,r.url)" style="color: black;">{{r.filename}}</a>
                    </td>
                </tr>
            </table>
        </div>
</div>
</material-expansionpanel>

<material-progress [activeProgress]="progressPercent" *ngIf="showProgress"></material-progress>

<table style="float: right;" >
    <tr>
        <td *ngIf="showProgress">
            {{progressCurrent}}/{{progressMax}}
        </td>
        <td *ngIf="showSpinner">
            <material-spinner ></material-spinner>
        </td>
        <td >
            <material-button materialTooltip="Refresh" [tooltipPositions]="tooltipPosition"  clear-size (trigger)="refreshButtonClick()">
                <material-icon icon="refresh" size="x-small"></material-icon>
            </material-button>
        </td>
        <td *ngIf="loaded">
            <material-button materialTooltip="Open links in new tabs" [tooltipPositions]="tooltipPosition" clear-size (trigger)="openAllButtonClick(false)">
                <material-icon icon="open_in_new" size="x-small"></material-icon>
            </material-button>
        </td>
        <td  *ngIf="loaded">
            <material-button materialTooltip="Open links in new tabs, waiting for each tab to load" [tooltipPositions]="tooltipPosition" clear-size (trigger)="openAllButtonClick(true)">
                <material-icon icon="open_in_new" size="x-small"></material-icon>+
                <material-icon icon="timelapse" size="x-small"></material-icon>
            </material-button>
        </td>
        <td *ngIf="loaded">
            <material-button materialTooltip="Download all" [tooltipPositions]="tooltipPosition" clear-size (trigger)="downloadButtonClick(false)">
                <material-icon icon="file_download" size="x-small"></material-icon>
            </material-button>
        </td>
        <td *ngIf="loaded">
            <material-button materialTooltip="Download all, then close this tab" [tooltipPositions]="tooltipPosition" clear-size (trigger)="downloadButtonClick(true)">
                <material-icon icon="file_download" size="x-small"></material-icon>+
                <material-icon icon="close" size="x-small"></material-icon>
            </material-button>
        </td>
        <td>
            <material-button materialTooltip="Close this tab" [tooltipPositions]="tooltipPosition" clear-size (trigger)="closeButtonClick()">
                <material-icon icon="close" size="x-small"></material-icon>
            </material-button>
        </td>
    </tr>
</table>
